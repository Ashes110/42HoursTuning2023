## ローカル環境での開発

実際の負荷試験・スコアの採点は VM 環境で行われますが、各自 PC のローカル環境での開発も可能です。

ローカル環境に fork したリポジトリをクローンし、ルートディレクトリにある init.sh を実行してください。

\*秘密鍵や VM ドメインのフォーマットは[マニュアル](./99_manual.md#競技の開始)を参考にしてください。

```
$ git clone {forkしたリポジトリのURL}
$ cd 42HoursTuning2023
$ bash init.sh {VMのドメイン} {秘密鍵のパス}
```

「初期化に成功しました。」という出力がされていれば、無事にローカル環境での開発準備ができています。マニュアルを参考に評価スクリプトを実行してください。

\*初回起動時は docker build のキャッシュがないため、時間がかかる可能性があります。

### ローカル環境と VM 環境の違い

- ローカル環境で、entry.sh は利用できません。VM 環境で最初に利用することを想定しています。
- ローカル環境では localhost を使って通信を行うため、負荷試験時に https 通信は行われません。
- ローカル環境と VM 環境で利用するアプリの compose ファイルは異なるので注意してください。ローカル環境の compose ファイルは`app/compose-local.yaml`です。
- ローカル環境はバックエンドに対してホットリロードを有効化しており、`app/node/src`配下のファイルの変更についてはコンテナを起動し直すことなく変更が反映されます。
- ローカル環境では init.sh 実行時に VM から初期データを取得しているため、init せずに他のスクリプトを実行することはできません。
- ローカル環境では初期状態だと API 動作テスト (e2e テスト)がタイムアウトする可能性が高いので、[評価スクリプト](./99_manual.md#%e8%a9%95%e4%be%a1%e3%82%b9%e3%82%af%e3%83%aa%e3%83%97%e3%83%88)ではスキップしています。ローカル環境で e2e テストを実施したい場合、[e2e.sh](./99_manual.md#api-テスト)を別途実行してください。
- ローカル環境では、評価スクリプトを実施てもスコアを運営に送信しないため、コンテストには利用できません。コンテストのスコアを更新したい場合は、VM 環境で評価スクリプトを実施してください。
